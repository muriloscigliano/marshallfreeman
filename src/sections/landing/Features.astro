---
import { landingData } from '@data/landing';

const { platformFeatures } = landingData;

const icons: Record<string, string> = {
  grid: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>`,
  workflow: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>`,
  users: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>`,
  chart: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>`,
  lock: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>`,
  user: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>`,
};
---

<section class="features" aria-labelledby="features-headline">
  <div class="features__container container">
    <header class="features__header">
      <p class="features__tagline">{platformFeatures.tagline}</p>
      <h2 id="features-headline" class="features__headline">{platformFeatures.headline} <span class="features__headline-muted">{platformFeatures.headlineMuted}</span></h2>
    </header>

    <ul class="features__grid" role="list" aria-label="Platform features">
      {platformFeatures.items.map((item) => (
        <li class="features__card">
          <article class="features__card-content">
            <div class="features__icon" aria-hidden="true" set:html={icons[item.icon]} />
            <h3 class="features__title">{item.title}</h3>
            <p class="features__description">{item.description}</p>
          </article>
        </li>
      ))}
    </ul>
  </div>
</section>

<style>
  .features {
    padding-block: var(--space-section);
  }

  .features__container {
    display: flex;
    flex-direction: column;
    gap: var(--space-3xl);
  }

  .features__header {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
  }

  .features__tagline {
    font-size: var(--text-xs);
    font-weight: var(--font-weight-medium);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-text-subtle);
  }

  .features__headline {
    font-size: var(--text-5xl);
    font-weight: var(--font-weight-medium);
    letter-spacing: -0.03em;
    line-height: 1.1;
  }

  .features__headline-muted {
    color: var(--color-text-muted);
  }

  .features__grid {
    display: grid;
    grid-template-columns: 1fr;
    border: 1px solid var(--color-border);
  }

  @media (min-width: 640px) {
    .features__grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .features__grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .features__card {
    border: 1px solid var(--color-border);
    margin: -1px;
    transition: background var(--duration-base) var(--ease-out-expo);
  }

  .features__card:hover {
    background: var(--color-foreground);
  }

  .features__card-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    padding: var(--space-xl);
    min-height: 200px;
  }

  @media (min-width: 768px) {
    .features__card-content {
      padding: var(--space-2xl);
      min-height: 240px;
    }
  }

  .features__icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text);
  }

  .features__icon :global(svg) {
    width: 24px;
    height: 24px;
  }

  .features__title {
    font-size: var(--text-lg);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
  }

  .features__description {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    line-height: 1.6;
    flex: 1;
  }
</style>
