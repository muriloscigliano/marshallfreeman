---
import { landingData } from '@data/landing';

const { portal } = landingData;
---

<section id={portal.id} class="portal" aria-labelledby="portal-headline">
  <div class="portal__container container">
    <header class="portal__header">
      <h2 id="portal-headline" class="portal__headline">{portal.headline} <span class="portal__headline-muted">{portal.headlineMuted}</span></h2>
      <p class="portal__description">{portal.description}</p>
    </header>

    <div class="portal__content">
      <!-- Portal Preview with Background Scene -->
      <figure class="portal__preview" aria-hidden="true" role="presentation">
        <!-- Background Image Placeholder -->
        <div class="portal__preview-background">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="8.5" cy="8.5" r="1.5"/>
            <polyline points="21 15 16 10 5 21"/>
          </svg>
        </div>
        <!-- Dashboard Window Floating -->
        <div class="portal__preview-window">
          <div class="portal__preview-header">
            <span class="portal__preview-dot"></span>
            <span class="portal__preview-dot"></span>
            <span class="portal__preview-dot"></span>
            <span class="portal__preview-title">Client Portal</span>
          </div>
          <div class="portal__preview-body">
            <div class="portal__preview-sidebar">
              <div class="portal__preview-nav portal__preview-nav--active"></div>
              <div class="portal__preview-nav"></div>
              <div class="portal__preview-nav"></div>
              <div class="portal__preview-nav"></div>
            </div>
            <div class="portal__preview-main">
              <div class="portal__preview-card portal__preview-card--accent"></div>
              <div class="portal__preview-card"></div>
              <div class="portal__preview-card"></div>
              <div class="portal__preview-card portal__preview-card--wide"></div>
            </div>
          </div>
        </div>
      </figure>

      <!-- Features List - Rogo Style -->
      <aside class="portal__features-wrapper">
        <p class="portal__features-title">An Integrated, Secure Platform <span class="portal__features-title-muted">Built to Recover Your Debts</span></p>

        <ul class="portal__features" role="list" aria-label="Portal features">
          {portal.features.map((feature, index) => (
            <li class={`portal__feature ${index === 1 ? 'portal__feature--active' : ''}`} data-portal-feature>
              <span class="portal__feature-number">{feature.number}</span>
              <span class="portal__feature-title">{feature.title}</span>
            </li>
          ))}
        </ul>

        <footer class="portal__footer">
          <p class="portal__closing">{portal.closing}</p>
          <p class="portal__tagline">{portal.tagline2}</p>
        </footer>
      </aside>
    </div>
  </div>
</section>

<style>
  .portal {
    padding-block: var(--space-section);
  }

  .portal__container {
    display: flex;
    flex-direction: column;
    gap: var(--space-3xl);
  }

  .portal__header {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    max-width: 600px;
  }

  .portal__headline {
    font-size: var(--text-5xl);
    font-weight: var(--font-weight-medium);
    letter-spacing: -0.03em;
  }

  .portal__headline-muted {
    color: var(--color-text-muted);
  }

  .portal__description {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    line-height: 1.6;
  }

  .portal__content {
    display: flex;
    flex-direction: column;
    gap: var(--space-2xl);
  }

  @media (min-width: 1024px) {
    .portal__content {
      flex-direction: row;
      gap: var(--space-3xl);
      align-items: flex-start;
    }
  }

  /* Portal Preview - Layered with background scene */
  .portal__preview {
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    margin: 0;
    aspect-ratio: 4/3;
  }

  @media (min-width: 1024px) {
    .portal__preview {
      flex: 1.2;
    }
  }

  /* Background scene image */
  .portal__preview-background {
    position: absolute;
    inset: 0;
    background: var(--color-foreground);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text-muted);
  }

  /* When you add a real image, use this */
  .portal__preview-background img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Dashboard window floating on top */
  .portal__preview-window {
    position: absolute;
    top: 15%;
    left: 10%;
    right: -5%;
    bottom: -10%;
    background: var(--color-blue-900);
    border-radius: 12px;
    box-shadow:
      0 25px 50px -12px rgba(0, 0, 0, 0.5),
      0 0 0 1px rgba(255, 255, 255, 0.1);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: transform var(--duration-slow) var(--ease-out-expo);
  }

  .portal__preview:hover .portal__preview-window {
    transform: translateY(-8px);
  }

  .portal__preview-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: var(--space-sm) var(--space-md);
    background: rgba(0, 0, 0, 0.3);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .portal__preview-dot {
    width: 10px;
    height: 10px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
  }

  .portal__preview-dot:first-child {
    background: #ff5f57;
  }

  .portal__preview-dot:nth-child(2) {
    background: #febc2e;
  }

  .portal__preview-dot:nth-child(3) {
    background: #28c840;
  }

  .portal__preview-title {
    margin-left: auto;
    font-size: var(--text-xs);
    color: rgba(255, 255, 255, 0.5);
    font-weight: var(--font-weight-medium);
  }

  .portal__preview-body {
    display: flex;
    flex: 1;
  }

  .portal__preview-sidebar {
    width: 50px;
    background: rgba(0, 0, 0, 0.2);
    padding: var(--space-md) var(--space-xs);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  @media (min-width: 768px) {
    .portal__preview-sidebar {
      width: 60px;
      padding: var(--space-md) var(--space-sm);
      gap: var(--space-sm);
    }
  }

  .portal__preview-nav {
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
  }

  .portal__preview-nav--active {
    background: var(--color-yellow-900);
  }

  @media (min-width: 768px) {
    .portal__preview-nav {
      height: 8px;
      border-radius: 4px;
    }
  }

  .portal__preview-main {
    flex: 1;
    padding: var(--space-sm);
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-xs);
    align-content: start;
  }

  @media (min-width: 768px) {
    .portal__preview-main {
      padding: var(--space-md);
      gap: var(--space-sm);
    }
  }

  .portal__preview-card {
    height: 50px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 4px;
  }

  @media (min-width: 768px) {
    .portal__preview-card {
      height: 70px;
      border-radius: 6px;
    }
  }

  .portal__preview-card--accent {
    background: var(--color-yellow-900);
  }

  .portal__preview-card--wide {
    grid-column: span 2;
    height: 35px;
    background: rgba(255, 255, 255, 0.05);
  }

  @media (min-width: 768px) {
    .portal__preview-card--wide {
      height: 50px;
    }
  }

  /* Features - Rogo Style */
  .portal__features-wrapper {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
  }

  @media (min-width: 1024px) {
    .portal__features-wrapper {
      flex: 1;
    }
  }

  .portal__features-title {
    font-size: var(--text-lg);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
    line-height: 1.4;
  }

  .portal__features-title-muted {
    color: var(--color-text-muted);
  }

  .portal__features {
    display: flex;
    flex-direction: column;
  }

  .portal__feature {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-md) var(--space-lg);
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    border-left: 2px solid transparent;
    cursor: pointer;
    transition:
      background var(--duration-base) var(--ease-out-expo),
      border-color var(--duration-base) var(--ease-out-expo),
      color var(--duration-base) var(--ease-out-expo);
  }

  .portal__feature:hover {
    background: var(--color-foreground);
  }

  .portal__feature--active {
    background: var(--color-foreground);
    border-left-color: var(--color-accent);
    color: var(--color-text);
  }

  .portal__feature-number {
    font-size: var(--text-xs);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-subtle);
    min-width: 2ch;
  }

  .portal__feature--active .portal__feature-number {
    color: var(--color-accent);
  }

  .portal__feature-title {
    flex: 1;
    font-weight: var(--font-weight-medium);
  }

  .portal__footer {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    padding-top: var(--space-lg);
    border-top: 1px solid var(--color-border);
  }

  .portal__closing {
    font-size: var(--text-base);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
  }

  .portal__tagline {
    font-size: var(--text-sm);
    color: var(--color-text-subtle);
    max-width: none;
  }
</style>

<script>
  const features = document.querySelectorAll('[data-portal-feature]');

  features.forEach((feature) => {
    feature.addEventListener('click', () => {
      features.forEach((f) => f.classList.remove('portal__feature--active'));
      feature.classList.add('portal__feature--active');
    });
  });
</script>
